(()=>{"use strict";class t{element;active;translating=!1;controls;constructor(t){this.element=t,this.active=null!==this.element.getAttribute("data-active"),this.controls=document.querySelectorAll(`[data-collapse-action][data-collapse-id=${this.element.id}]`),this.controls.forEach((t=>{t.setAttribute("aria-expanded",this.active.toString()),t.setAttribute("aria-controls",this.element.id),t.removeEventListener("click",this.#t),t.addEventListener("click",this.#t)}))}open=()=>{this.translating||(this.translating=!0,this.element.classList.add("collapsing"),setTimeout((()=>{this.element.addEventListener("transitionend",(()=>{this.element.classList.remove("collapsing"),this.element.classList.add("collapse","collapsed"),this.element.style.height="",this.active=!0,this.controls.forEach((t=>{t.setAttribute("aria-expanded",this.active.toString())})),this.translating=!1}),{once:!0}),this.element.dispatchEvent(new TransitionEvent("transitionend"))}),1e3*parseFloat(window.getComputedStyle(this.element).transitionDuration)),this.element.classList.remove("collapse"),this.element.style.height=`${this.element.scrollHeight}px`)};close=()=>{this.translating||(this.translating=!0,this.element.style.height=`${this.element.getBoundingClientRect().height}px`,this.element.classList.add("collapsing"),this.element.classList.remove("collapse","collapsed"),this.element.scrollHeight,setTimeout((()=>{this.element.addEventListener("transitionend",(()=>{this.element.classList.remove("collapsing"),this.element.classList.add("collapse"),this.active=!1,this.controls.forEach((t=>{t.setAttribute("aria-expanded",this.active.toString())})),this.translating=!1}),{once:!0}),this.element.dispatchEvent(new TransitionEvent("transitionend"))}),1e3*parseFloat(window.getComputedStyle(this.element).transitionDuration)),this.element.style.height="")};toggle=()=>{this.translating||(this.active?this.close():this.open())};#t=t=>{t.preventDefault();const e=t.currentTarget,s=this[e.getAttribute("data-collapse-action")],i=e.getAttribute("data-collapse-action-args");s instanceof Function&&s(i)}}const e=[];document.querySelectorAll("[data-collapse]").forEach((s=>{e.push(new t(s))})),document.querySelector(".collapse-debug-transition"),document.querySelectorAll('[data-collapse-action="toggle"]');const s=new class{startTime=null;timeElapsed=0;currentLoop=null;progress=0;duration;finished;constructor(t){this.duration=t,this.finished=(()=>{let t;const e=new Promise((e=>{t=e}));return e.resolve=()=>{t()},e})()}loop=t=>{if(this.startTime??=t,this.timeElapsed=t-this.startTime,this.progress=this.timeElapsed/this.duration,this.progress>=1)return this.stop();requestAnimationFrame(this.loop)};stop=()=>{cancelAnimationFrame(this.currentLoop),this.finished.resolve()};start=()=>{this.currentLoop=requestAnimationFrame(this.loop)}}(2e3);s.start(),s.finished.then((()=>console.log(s.timeElapsed))),console.log(e)})();